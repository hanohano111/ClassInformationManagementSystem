<!--pages/home/index.wxml-->
<view class="page message-page page-with-navbar">
  <t-navbar title="消息">
    <view slot="left" class="navbar-left" bindtap="goToArchived">
      <t-icon name="folder" size="40rpx" color="#333" />
    </view>
  </t-navbar>
  <view class="message-page__content">
    <!-- 消息列表 -->
    <view class="message-list" wx:if="{{messageList.length > 0}}">
      <view
        class="message-item-wrapper"
        wx:for="{{messageList}}"
        wx:for-item="item"
        wx:for-index="index"
        wx:key="index"
      >
        <view
          class="message-item"
          style="transform: translateX({{item.translateX}}rpx);"
          bindtouchstart="onTouchStart"
          bindtouchmove="onTouchMove"
          bindtouchend="onTouchEnd"
          bindtap="onMessageTap"
          data-index="{{index}}"
        >
          <view class="message-item__header">
            <view class="message-item__title-row">
              <text class="message-item__course">{{item.courseName}}</text>
              <text class="message-item__type">{{item.typeText}}</text>
            </view>
            <text class="message-item__time">{{item.timeText}}</text>
          </view>
          <view class="message-item__body">
            <text class="message-item__title">{{item.title}}</text>
            <text class="message-item__content" wx:if="{{item.content}}">{{item.content}}</text>
          </view>
        </view>
         <view class="message-item__actions">
           <view class="action-btn action-btn--archive" catchtap="onArchive" data-index="{{index}}">
             <t-icon name="folder" size="40rpx" color="#fff" />
           </view>
           <view class="action-btn action-btn--delete" catchtap="onDelete" data-index="{{index}}">
             <t-icon name="delete" size="40rpx" color="#fff" />
           </view>
         </view>
      </view>
    </view>

    <!-- 空状态 -->
    <view class="message-empty" wx:else>
      <t-empty description="暂无消息" />
    </view>
  </view>
</view>
