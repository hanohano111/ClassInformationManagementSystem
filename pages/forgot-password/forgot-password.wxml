<t-navbar title="找回密码" left-arrow />
<view class="page forgot-password page-with-navbar">
  <view class="forgot-password__content">
    <!-- 步骤1: 输入账号 -->
    <view class="forgot-password__step" wx:if="{{step === 1}}">
      <view class="step-title">请输入您的账号</view>
      <view class="step-input">
        <t-input
          label="账号"
          placeholder="请输入手机号"
          value="{{account}}"
          bindchange="onAccountChange"
        ></t-input>
      </view>
      <view class="step-button">
        <t-button theme="primary" size="large" block bindtap="sendVerifyCode">
          发送验证码
        </t-button>
      </view>
    </view>

    <!-- 步骤2: 输入验证码 -->
    <view class="forgot-password__step" wx:if="{{step === 2}}">
      <view class="step-title">请输入验证码</view>
      <view class="step-desc">验证码已发送至 {{account}}</view>
      <view class="step-input">
        <t-input
          label="验证码"
          placeholder="请输入验证码"
          type="number"
          value="{{verifyCode}}"
          bindchange="onVerifyCodeChange"
        >
          <view slot="suffix">
            <t-button
              size="small"
              variant="outline"
              disabled="{{isSendCode && sendCodeCount > 0}}"
              bindtap="sendVerifyCode"
            >
              {{isSendCode && sendCodeCount > 0 ? (sendCodeCount + '秒后重发') : '重新发送'}}
            </t-button>
          </view>
        </t-input>
      </view>
      <view class="step-button">
        <t-button theme="primary" size="large" block disabled="{{!verifyCode}}" bindtap="verifyCode">
          下一步
        </t-button>
      </view>
    </view>

    <!-- 步骤3: 重置密码 -->
    <view class="forgot-password__step" wx:if="{{step === 3}}">
      <view class="step-title">设置新密码</view>
      <view class="step-input">
        <t-input
          label="新密码"
          placeholder="请输入新密码（至少6位）"
          type="password"
          clearable
          value="{{newPassword}}"
          bindchange="onNewPasswordChange"
        />
        <t-input
          label="确认密码"
          placeholder="请再次输入新密码"
          type="password"
          clearable
          value="{{confirmPassword}}"
          bindchange="onConfirmPasswordChange"
        />
      </view>
      <view class="step-button">
        <t-button theme="primary" size="large" block bindtap="resetPassword">
          完成
        </t-button>
      </view>
    </view>
  </view>
</view>
